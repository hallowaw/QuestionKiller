import{k as a,r as e,s as o,d as t,w as s,i as l,o as d,e as i,f as c,l as n,m as r,t as h,F as p,I as u,j as m,h as g}from"./index-iGyM-cqh.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const f=k({data:()=>({searchName:"",shareCode:"",wordBooks:[],page:1,pageSize:10,totalPages:1,jumpPage:1,token:a("token")}),methods:{async fetchWordBooks(){const a=await e({url:`http://localhost:9192/wordBook/publicOthersWordBookPageQuery?pageSize=${this.pageSize}&page=${this.page}&name=${this.searchName}`,method:"GET",header:{token:this.token}});1===a.data.code&&a.data.data?(this.wordBooks=a.data.data.records,this.totalPages=Math.ceil(a.data.data.total/this.pageSize)):o({title:a.data.msg||"查询失败",icon:"none"})},searchWordBooks(){this.page=1,this.fetchWordBooks()},async importByShareCode(){const a=await e({url:`http://localhost:9192/wordBook/addWordBookByShareCode/${this.shareCode}`,method:"POST",header:{token:this.token}});1===a.data.code?(o({title:"导入成功",icon:"success"}),this.fetchWordBooks()):o({title:a.data.msg||"导入失败",icon:"none"})},async importBook(a){const t=await e({url:`http://localhost:9192/wordBook/addWordBookByShareCode/${a}`,method:"POST",header:{token:this.token}});1===t.data.code?(o({title:"导入成功",icon:"success"}),this.fetchWordBooks()):o({title:t.data.msg||"导入失败",icon:"none"})},changePage(a){a>=1&&a<=this.totalPages?(this.page=a,this.fetchWordBooks()):o({title:"页码超出范围",icon:"none"})}},onLoad(){this.fetchWordBooks()}},[["render",function(a,e,o,k,f,B){const _=u,C=m,b=l,P=g;return d(),t(b,{class:"container"},{default:s((()=>[i(b,{class:"search-bar"},{default:s((()=>[i(_,{modelValue:f.searchName,"onUpdate:modelValue":e[0]||(e[0]=a=>f.searchName=a),placeholder:"请输入词书名称",class:"search-input"},null,8,["modelValue"]),i(C,{onClick:B.searchWordBooks,class:"search-btn primary"},{default:s((()=>[c("搜索")])),_:1},8,["onClick"]),i(_,{modelValue:f.shareCode,"onUpdate:modelValue":e[1]||(e[1]=a=>f.shareCode=a),placeholder:"请输入4位数分享码",class:"share-input"},null,8,["modelValue"]),i(C,{onClick:B.importByShareCode,class:"search-btn secondary"},{default:s((()=>[c("导入")])),_:1},8,["onClick"])])),_:1}),f.wordBooks.length>0?(d(),t(b,{key:0,class:"list"},{default:s((()=>[(d(!0),n(p,null,r(f.wordBooks,(a=>(d(),t(b,{key:a.id,class:"list-item"},{default:s((()=>[i(b,{class:"item-info"},{default:s((()=>[i(P,{class:"item-name selectable"},{default:s((()=>[c(h(a.name),1)])),_:2},1024),i(P,{class:"item-desc selectable"},{default:s((()=>[c(h(a.description.length>50?a.description.substring(0,10)+"...":a.description),1)])),_:2},1024)])),_:2},1024),i(b,{class:"item-code-import"},{default:s((()=>[i(P,{class:"item-code selectable"},{default:s((()=>[c(h(a.shareCode),1)])),_:2},1024),i(C,{onClick:e=>B.importBook(a.shareCode),class:"import-btn"},{default:s((()=>[c("一键导入")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(d(),t(b,{key:1,class:"no-data"},{default:s((()=>[c("暂无数据")])),_:1})),i(b,{class:"pagination"},{default:s((()=>[i(C,{disabled:f.page<=1,onClick:e[2]||(e[2]=a=>B.changePage(f.page-1)),class:"pagination-btn"},{default:s((()=>[c("上一页")])),_:1},8,["disabled"]),i(_,{modelValue:f.jumpPage,"onUpdate:modelValue":e[3]||(e[3]=a=>f.jumpPage=a),modelModifiers:{number:!0},class:"page-input"},null,8,["modelValue"]),i(C,{onClick:e[4]||(e[4]=a=>B.changePage(f.jumpPage)),class:"pagination-btn"},{default:s((()=>[c("跳转")])),_:1}),i(C,{disabled:f.page>=f.totalPages,onClick:e[5]||(e[5]=a=>B.changePage(f.page+1)),class:"pagination-btn"},{default:s((()=>[c("下一页")])),_:1},8,["disabled"]),i(P,{class:"total-pages"},{default:s((()=>[c("共 "+h(f.totalPages)+" 页",1)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-0678433d"]]);export{f as default};
